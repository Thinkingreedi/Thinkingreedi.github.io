{"title":"快速上手微信小程序：视图与逻辑","uid":"3c5b8d1cedaa864e9f8845e75af9e565","slug":"前端--微信小程序（视图与逻辑）","date":"2023-03-11T01:45:00.000Z","updated":"2025-07-14T15:12:20.465Z","comments":true,"path":"api/articles/前端--微信小程序（视图与逻辑）.json","keywords":"web前端开发,web前端博客,个人博客,html,css,javascript,vue,react","cover":"https://img-blog.csdnimg.cn/direct/99ef3a76e98343f09343b862791073a9.png","content":"<h1 id=\"1、小程序–视图与逻辑\"><a href=\"#1、小程序–视图与逻辑\" class=\"headerlink\" title=\"1、小程序–视图与逻辑\"></a>1、小程序–视图与逻辑</h1><h2 id=\"1-1-页面导航\"><a href=\"#1-1-页面导航\" class=\"headerlink\" title=\"1.1 页面导航\"></a>1.1 页面导航</h2><ul>\n<li><p>页面导航指页面之间的相互跳转</p>\n</li>\n<li><p>小程序实现页面导航的两种方式：</p>\n<ul>\n<li><p>声明式导航</p>\n<ul>\n<li>在页面上声明一个&lt; navigator&gt;导航组件；通过点击&lt; navigator&gt;组件实现页面跳转</li>\n<li>导航到tabBar页面</li>\n</ul>\n<pre><code class=\"js\">//页面地址必须以/开头\n//必须指定跳转方式，为switchTab\n&lt;navigator url=&quot;/pages/message/message&quot; open-type=&quot;switchTab&quot;&gt;导航消息页面&lt;/navigator&gt;\n</code></pre>\n<ul>\n<li>导航到非tabBar页面</li>\n</ul>\n<pre><code class=\"js\">//页面地址必须以/开头\n//指定跳转方式，为navigate，可省略\n&lt;navigator url=&quot;/pages/info/info&quot; open-type=&quot;navigate&quot;&gt;导航到info页面&lt;/navigator&gt;\n</code></pre>\n<ul>\n<li>后退导航</li>\n</ul>\n<pre><code class=\"js\">//open-type的值必须是navigateBack，表示要进行后退导航\n//delta的值必须是数字，表示要后退的层级,可省略，默认值为1\n&lt;navigator open-type=&quot;navigateBack&quot; delta=&quot;1&quot;&gt;后退&lt;/navigator&gt;\n</code></pre>\n</li>\n<li><p>编程式导航</p>\n<ul>\n<li>调用小程序的导航API，实现页面的跳转</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>属性</strong></th>\n<th align=\"center\"><strong>类型</strong></th>\n<th align=\"center\"><strong>是否必选</strong></th>\n<th align=\"center\"><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">url</td>\n<td align=\"center\">string</td>\n<td align=\"center\"><strong>是</strong></td>\n<td align=\"center\">需要跳转的页面的路径，路径后不能带参数</td>\n</tr>\n<tr>\n<td align=\"center\">success</td>\n<td align=\"center\">function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">接口调用成功的回调函数</td>\n</tr>\n<tr>\n<td align=\"center\">fail</td>\n<td align=\"center\">function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">接口调用失败的回调函数</td>\n</tr>\n<tr>\n<td align=\"center\">complete</td>\n<td align=\"center\">function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">接口调用结束的回调函数（调用成功、失败都会执行）</td>\n</tr>\n</tbody></table>\n<ul>\n<li>导航到tabBar页面</li>\n</ul>\n<pre><code class=\"js\">//wxml\n&lt;button bindtap=&quot;gotoMessage&quot;&gt;跳转到消息页面&lt;/button&gt;\n\n//js\ngotoMessage()&#123;\n    wx.switchTab(&#123;\n        url:&#39;/pages/message/message&#39;\n    &#125;)\n&#125;\n</code></pre>\n<ul>\n<li>导航到非tabBar页面</li>\n</ul>\n<pre><code class=\"js\">//wxml\n&lt;button bindtap=&quot;gotoInfo&quot;&gt;跳转到信息页面&lt;/button&gt;\n\n//js\ngotoInfo()&#123;\n  wx.navigateTo(&#123;\n    url: &#39;/pages/info/info&#39;\n  &#125;)\n&#125;,\n</code></pre>\n<ul>\n<li>后退导航</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>属性</strong></th>\n<th align=\"center\"><strong>类型</strong></th>\n<th align=\"center\"><strong>默认值</strong></th>\n<th align=\"center\"><strong>是否必选</strong></th>\n<th align=\"center\"><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">delta</td>\n<td align=\"center\">number</td>\n<td align=\"center\">1</td>\n<td align=\"center\">否</td>\n<td align=\"center\">返回的页面数，如果 delta 大于现有页面数，则返回到首页</td>\n</tr>\n<tr>\n<td align=\"center\">success</td>\n<td align=\"center\">function</td>\n<td align=\"center\"></td>\n<td align=\"center\">否</td>\n<td align=\"center\">接口调用成功的回调函数</td>\n</tr>\n<tr>\n<td align=\"center\">fail</td>\n<td align=\"center\">function</td>\n<td align=\"center\"></td>\n<td align=\"center\">否</td>\n<td align=\"center\">接口调用失败的回调函数</td>\n</tr>\n<tr>\n<td align=\"center\">complete</td>\n<td align=\"center\">function</td>\n<td align=\"center\"></td>\n<td align=\"center\">否</td>\n<td align=\"center\">接口调用结束的回调函数（调用成功、失败都会执行）</td>\n</tr>\n</tbody></table>\n<pre><code class=\"js\">//wxml\n&lt;button bindtap=&quot;gotoBack&quot;&gt;后退&lt;/button&gt;\n\n//js\ngotoBack()&#123;\n    wx.navigateBack(&#123;\n  &#125;)\n&#125;\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>导航传参</p>\n<ul>\n<li><p>声明式导航传参</p>\n<ul>\n<li>路径后面携带参数：<ul>\n<li>参数与路径之间使用<strong>？</strong></li>\n<li>分隔参数<strong>键</strong>与参数<strong>值</strong>用**&#x3D;**相连</li>\n<li>不同参数用**&amp;**分隔</li>\n</ul>\n</li>\n</ul>\n<pre><code class=\"js\">&lt;navigator url=&quot;/pages/info/info?name=zs&amp;age=20&quot;&gt;跳转到info页面&lt;/navigator&gt;\n</code></pre>\n</li>\n<li><p>编程式导航传参</p>\n<pre><code class=\"js\">//wxml\n&lt;button bindtap=gotoInfo2&quot;&gt;跳转到info页面&lt;/button&gt;\n\n//js\ngotoInfo2()&#123;\n    wx.navigateTo(&#123;\n    ur1: &quot; /pages/infolinfo?name=ls&amp;gender=男&quot;\n  &#125;)\n&#125;\n</code></pre>\n</li>\n<li><p>在onLoad中接收导航参数</p>\n</li>\n</ul>\n<pre><code class=\"js\">onLoad:function(options)&#123;\n    //options即导航传递过来的参数对象\n    console.log(options)\n&#125;\n</code></pre>\n</li>\n</ul>\n<h2 id=\"1-2-页面事件\"><a href=\"#1-2-页面事件\" class=\"headerlink\" title=\"1.2 页面事件\"></a>1.2 页面事件</h2><p><strong>下拉刷新事件</strong></p>\n<ul>\n<li><p>通过手指在屏幕上的下拉滑动操作，从而<strong>重新加载页面数据</strong>的行为</p>\n</li>\n<li><p>启用下拉刷新的方式：</p>\n<ul>\n<li><strong>全局</strong>开启下拉刷新(app.json的windows结点设置)</li>\n<li><strong>局部</strong>开启下拉刷新(页面的.json中配置)</li>\n<li><strong>实际开发中为需要的页面单独开启下拉刷新的效果</strong></li>\n</ul>\n</li>\n<li><p>监听页面的下拉刷新事件</p>\n<ul>\n<li>在页面的.js文件中，通过 **onPullDownRefresh()**函数即可监听当前页面的下拉刷新事件</li>\n</ul>\n<pre><code class=\"js\">onPullDownRefresh() &#123;\n    console.log(&#39;触发下拉刷新事件&#39;)\n    wx.stopPullDownRefresh()\n  &#125;,\n</code></pre>\n</li>\n<li><p>停止下拉刷新的效果</p>\n<ul>\n<li>调用**wx.stopPullDownRefresh()**可以停止当前页面的下拉刷新</li>\n</ul>\n</li>\n</ul>\n<p><strong>上拉触底事件</strong></p>\n<ul>\n<li>通过手指在屏幕上的上拉滑动操作,从而<strong>加载更多数据</strong>的行为</li>\n<li>监听页面的上拉触底事件<ul>\n<li>在页面的.js文件中，通过<strong>onReachBottom()<strong>函数即可监听当前页面的上拉触底事件</strong>(节流  – 在data 中定义isloading节流阀；在方法中修改isloading节流阀的值；在onReachBottom 中判断节流阀的值，从而对数据请求进行节流控制)</strong></li>\n</ul>\n</li>\n<li>配置上拉触底距离<ul>\n<li>触发上拉触底事件时，滚动条距离页面底部的距离，在全局或页面的.json配置文件中，通过<strong>onReachBottomDistance</strong>属性来配置上拉触底的距离</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"1-3-生命周期\"><a href=\"#1-3-生命周期\" class=\"headerlink\" title=\"1.3 生命周期\"></a>1.3 生命周期</h2><ul>\n<li><p>在小程序中，生命周期分为两类,分别是:</p>\n<ul>\n<li>应用生命周期(范围较大)特指小程序从启动-&gt;运行-&gt;销毁的过程</li>\n<li>页面生命周期(范围较小)特指小程序中，每个页面的加载-&gt;渲染-&gt;销毁的过程</li>\n</ul>\n</li>\n<li><p>生命周期函数:是由小程序框架提供的内置函数，会伴随着生命周期，自动按次序执行，允许程序员在特定时间点执行某些特定的操作</p>\n</li>\n<li><p><strong>生命周期</strong>强调的是<strong>时间段</strong>，<strong>生命周期函数</strong>强调的是<strong>时间点</strong></p>\n</li>\n<li><p>应用生命周期函数</p>\n</li>\n</ul>\n<pre><code class=\"js\">//app.js 文件\nApp(&#123;\n    //小程序初始化完成时，执行此函数，全局只触发一次。可以做一些初始化的工作\n    onLaunch: function(options) &#123; &#125;,\n    //小程序启动，或从后台进入前台显示时触发。\n    onShow : function(options) &#123; &#125;,\n    //小程序从前台进入后台时触发。\n    onHide : function() &#123; &#125;\n&#125;)\n</code></pre>\n<ul>\n<li>页面生命周期函数</li>\n</ul>\n<pre><code class=\"js\">//页面的.js 文件\nPage(&#123;\n    onLoad : function(options) &#123; &#125;,//监听页面加载，一个页面只调1次\n    onshow : function() &#123; &#125;,//监听页面显示\n    onReady : function() &#123; &#125;，//监听页面初次渲染完成，一个页面只调用1次\n    onHide: function() &#123; &#125;,//监听页面隐藏\n    onUnload: function()&#123; &#125; //监听页面卸载，一个页面只调用1次\n&#125;)\n</code></pre>\n<h2 id=\"1-4-WXS脚本\"><a href=\"#1-4-WXS脚本\" class=\"headerlink\" title=\"1.4 WXS脚本\"></a>1.4 WXS脚本</h2><p><strong>概述</strong></p>\n<ul>\n<li><p>WXS (WeiXin Script)是小程序独有的一套脚本语言，结合WXML，可以构建出页面的结构</p>\n</li>\n<li><p>WXML中无法调用在页面的.js中定义的函数，但是，WXML中可以调用WXS中定义的函数</p>\n</li>\n<li><p>WXS与JavaScript的关系</p>\n<ul>\n<li><p><strong>wxs有自己的数据类型</strong></p>\n<ul>\n<li>number数值类型、string字符串类型、boolean布尔类型、object对象类型、function函数类型、array数组类型、date日期类型、regexp 正则</li>\n</ul>\n</li>\n<li><p><strong>wxs不支持类似于ES6及以上的语法形式</strong></p>\n<ul>\n<li>不支持: let. const、解构赋值、展开运算符、箭头函数、对象属性简写、etc…</li>\n<li>支持: var定义变量、普通function函数等类似于ES5的语法</li>\n</ul>\n</li>\n<li><p><strong>wxs遵循CommonJS规范</strong></p>\n<ul>\n<li>module对象、require()函数、module.exports对象</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>基础语法</strong></p>\n<ul>\n<li>内嵌wxs脚本</li>\n<li>外联wxs脚本</li>\n</ul>\n<p><strong>wxs的特点</strong></p>\n<ol>\n<li>大量借鉴JavaScript的语法(但是是两种不同的语言)</li>\n<li>不能作为组件的事件回调(配合Mustache语法使用)</li>\n<li>隔离性(不能调用js定义的函数及小程序提供的API)</li>\n<li>性能好(iOS上比js快2-20倍）</li>\n</ol>\n","feature":true,"text":"微信小程序是一种可以在微信平台上运行的应用程序。它不需要下载和安装，用户可以直接通过微信扫码或搜索进入使用。微信小程序具有轻量、快速、跨平台等特点，开发者可以使用HTML、CSS、JavaScript等前端技术进行开发。...","permalink":"/post/前端--微信小程序（视图与逻辑）","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[{"name":"前端","slug":"前端","count":48,"path":"api/categories/前端.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E2%80%93%E8%A7%86%E5%9B%BE%E4%B8%8E%E9%80%BB%E8%BE%91\"><span class=\"toc-text\">1、小程序–视图与逻辑</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1-%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA\"><span class=\"toc-text\">1.1 页面导航</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-2-%E9%A1%B5%E9%9D%A2%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">1.2 页面事件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\"><span class=\"toc-text\">1.3 生命周期</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-4-WXS%E8%84%9A%E6%9C%AC\"><span class=\"toc-text\">1.4 WXS脚本</span></a></li></ol></li></ol>","author":{"name":"会思想的苇草i","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"日拱一卒，功不唐捐 <br/> With each day's arduous effort,<br/>no achievement shall be in vain","socials":{"github":"https://github.com/Thinkingreedi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/ASHIYI66","juejin":"https://juejin.cn/user/4284166567110935","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"快速上手微信小程序：开发进阶","uid":"e64fdb23f4387c8c4044a46c8a9a5d8b","slug":"前端--微信小程序（进阶）","date":"2023-03-25T01:15:36.000Z","updated":"2025-07-14T15:12:20.466Z","comments":true,"path":"api/articles/前端--微信小程序（进阶）.json","keywords":"web前端开发,web前端博客,个人博客,html,css,javascript,vue,react","cover":"https://img-blog.csdnimg.cn/direct/99ef3a76e98343f09343b862791073a9.png","text":"微信小程序是一种可以在微信平台上运行的应用程序。它不需要下载和安装，用户可以直接通过微信扫码或搜索进入使用。微信小程序具有轻量、快速、跨平台等特点，开发者可以使用HTML、CSS、JavaScript等前端技术进行开发。...","permalink":"/post/前端--微信小程序（进阶）","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[{"name":"前端","slug":"前端","count":48,"path":"api/categories/前端.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"author":{"name":"会思想的苇草i","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"日拱一卒，功不唐捐 <br/> With each day's arduous effort,<br/>no achievement shall be in vain","socials":{"github":"https://github.com/Thinkingreedi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/ASHIYI66","juejin":"https://juejin.cn/user/4284166567110935","customs":{}}},"feature":true},"next_post":{"title":"快速搭建微信小程序：模板和配置详细介绍","uid":"fcb4d1e2238062848ffc04d17153bd49","slug":"前端--小程序（模板与配置）","date":"2023-03-07T08:05:06.000Z","updated":"2025-07-14T15:12:20.465Z","comments":true,"path":"api/articles/前端--小程序（模板与配置）.json","keywords":"web前端开发,web前端博客,个人博客,html,css,javascript,vue,react","cover":"https://img-blog.csdnimg.cn/direct/99ef3a76e98343f09343b862791073a9.png","text":"微信小程序是一种可以在微信平台上运行的应用程序。它不需要下载和安装，用户可以直接通过微信扫码或搜索进入使用。微信小程序具有轻量、快速、跨平台等特点，开发者可以使用HTML、CSS、JavaScript等前端技术进行开发。...","permalink":"/post/前端--小程序（模板与配置）","photos":[],"count_time":{"symbolsCount":"6.9k","symbolsTime":"6 mins."},"categories":[{"name":"前端","slug":"前端","count":48,"path":"api/categories/前端.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"author":{"name":"会思想的苇草i","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"日拱一卒，功不唐捐 <br/> With each day's arduous effort,<br/>no achievement shall be in vain","socials":{"github":"https://github.com/Thinkingreedi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/ASHIYI66","juejin":"https://juejin.cn/user/4284166567110935","customs":{}}},"feature":true}}