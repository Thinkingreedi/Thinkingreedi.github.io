{"title":"快速上手微信小程序：开发进阶","uid":"e64fdb23f4387c8c4044a46c8a9a5d8b","slug":"前端--微信小程序（进阶）","date":"2023-03-25T01:15:36.000Z","updated":"2025-07-14T15:12:20.466Z","comments":true,"path":"api/articles/前端--微信小程序（进阶）.json","keywords":"web前端开发,web前端博客,个人博客,html,css,javascript,vue,react","cover":"https://img-blog.csdnimg.cn/direct/99ef3a76e98343f09343b862791073a9.png","content":"<h1 id=\"1、小程序–开发进阶\"><a href=\"#1、小程序–开发进阶\" class=\"headerlink\" title=\"1、小程序–开发进阶\"></a>1、小程序–开发进阶</h1><h2 id=\"1-1-自定义组件\"><a href=\"#1-1-自定义组件\" class=\"headerlink\" title=\"1.1 自定义组件\"></a>1.1 自定义组件</h2><p><strong>组件的创建</strong></p>\n<ul>\n<li>在项目的根目录中，鼠标右键。创建 components -&gt; test 文件夹</li>\n<li>在新建的 components -&gt; test 文件夹上，鼠标右键，点击“新建 Component”</li>\n<li>键入组件的名称之后回车，会自动生成组件对应的 4 个文件，后缀名分别为.js，.json，.wxml 和.wxss</li>\n</ul>\n<p><strong>组件的引用</strong></p>\n<ul>\n<li>局部引用:组件只能在当前被引用的页面内使用<strong>（在 pages 中配置）</strong></li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//json</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">usingComponents</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">my-test1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">/components/test/test</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">my-test1</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #FFCB6B\">my-test1</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><ul>\n<li>全局引用:组件可以在每个小程序页面中使用<strong>（在 app.json 中配置）</strong></li>\n</ul>\n<p><strong>组件与页面的区别</strong></p>\n<ul>\n<li>组件的.json 文件中需要声明”component”: true 属性</li>\n<li>组件的.js 文件中调用的是 Component()函数</li>\n<li>组件的事件处理函数需要定义到 methods 节点中</li>\n</ul>\n<p><strong>组件样式</strong></p>\n<ul>\n<li>组件样式隔离：组件不会影响到小程序页面和其它组件的样式</li>\n<li><strong>app.wxss 的全局样式对组件无效，只有 class 选择器会有样式隔离效果</strong></li>\n<li>可以通过<strong>styleIsolation</strong>修改组件的样式隔离选项</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//.js</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">options</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">styleIsolation</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">isolated</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//或者</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//.json</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">styleIsolation</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">isolated</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>可选值</strong></th>\n<th align=\"center\"><strong>默认值</strong></th>\n<th align=\"center\"><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">isolated</td>\n<td align=\"center\">是</td>\n<td align=\"center\">表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将<strong>不会相互影响</strong></td>\n</tr>\n<tr>\n<td align=\"center\">apply-shared</td>\n<td align=\"center\">否</td>\n<td align=\"center\">表示<strong>页面</strong> wxss 样式将<strong>影响</strong>到自定义<strong>组件</strong>，但自定义组件 wxss 中指定的样式不会影响页面</td>\n</tr>\n<tr>\n<td align=\"center\">shared</td>\n<td align=\"center\">否</td>\n<td align=\"center\">表示页面 wxss 样式将<strong>影响</strong>到自定义组件，自定义组件 wxss 中指定的样式<strong>也会影响</strong>页面和其他设置了 apply-shared 或 shared 的自定义组件</td>\n</tr>\n</tbody></table>\n<p><strong>数据、方法和属性</strong></p>\n<ul>\n<li>在小程序组件中，用于<strong>组件模板渲染的私有数据</strong>，需要定义到 data 节点中</li>\n<li>在小程序组件中，<strong>事件处理函数和自定义方法</strong>需要定义到 methods 节点中</li>\n<li>在小程序组件中，properties 是组件的对外属性，用来<strong>接收外界传递到组件中的数据</strong><ul>\n<li>data 更倾向于存储组件的私有数据</li>\n<li>properties 更倾向于存储外界传递到组件中的数据</li>\n</ul>\n</li>\n</ul>\n<p><strong>数据监听器</strong></p>\n<ul>\n<li>数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">observers</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">n1,n2</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">:</span><span style=\"color: #C792EA\">function</span><span style=\"color: #F07178\"> </span><span style=\"color: #82AAFF\">name</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8; font-style: italic\">newN1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8; font-style: italic\">newN2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">setData</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        sum</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">newN1</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">newN2</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li>数据监听器支持监听对象中单个或多个属性的变化**(‘对象.属性 A’)**</li>\n<li>如果某个对象中需要被监听的属性太多，可以使用通配符******来监听对象中所有属性的变化</li>\n</ul>\n<p><strong>纯数据字段</strong></p>\n<ul>\n<li>纯数据字段指的是那些不用于界面渲染的 data 字段,<strong>既不会展示在界面上。也不会传递给其他组件</strong></li>\n<li>纯数据字段有助于<strong>提升页面更新的性能</strong></li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">options</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">//指定纯数据字段格式</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">pureDataPattern</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #89DDFF; font-style: italic\">^</span><span style=\"color: #C3E88D\">_</span><span style=\"color: #89DDFF\">/</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #FFCB6B\">data</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">a</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #FF9CAC\">true</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #676E95; font-style: italic\">//普通数据字段</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">_b</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #FF9CAC\">true</span><span style=\"color: #676E95; font-style: italic\">//纯数据字段</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><strong>组件的生命周期</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>生命周期函数</strong></th>\n<th align=\"center\"><strong>参数</strong></th>\n<th align=\"center\"><strong>描述说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><strong>created</strong></td>\n<td align=\"center\">无</td>\n<td align=\"center\">在组件实例<strong>刚刚被创建</strong>时执行</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>attached</strong></td>\n<td align=\"center\">无</td>\n<td align=\"center\">在组件实例<strong>进入页面节点树</strong>时执行</td>\n</tr>\n<tr>\n<td align=\"center\">ready</td>\n<td align=\"center\">无</td>\n<td align=\"center\">在组件在<strong>视图层布局完成</strong>后执行</td>\n</tr>\n<tr>\n<td align=\"center\">moved</td>\n<td align=\"center\">无</td>\n<td align=\"center\">在组件实例被<strong>移动到节点树另一个位置</strong>时执行</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>detached</strong></td>\n<td align=\"center\">无</td>\n<td align=\"center\">在组件实例被从<strong>页面节点树移除</strong>时执行</td>\n</tr>\n<tr>\n<td align=\"center\">error</td>\n<td align=\"center\">Object Error</td>\n<td align=\"center\">每当组件方法<strong>抛出错误</strong>时执行</td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>组件实例<strong>刚被创建好</strong>的时候,created 生命周期函数会被触发</p>\n<ul>\n<li>此时还不能调用 setData</li>\n<li>通常在这个生命周期函数中，只应该用于给组件的 this 添加一些自定义的属性字段</li>\n</ul>\n</li>\n<li><p>在组件完全初始化完毕、<strong>进入页面节点树后</strong>,attached 生命周期函数会被触发</p>\n<ul>\n<li>此时, this.data 已被初始化完毕</li>\n<li>这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行（例如发请求<strong>获取初始数据</strong></li>\n</ul>\n</li>\n<li><p>在组件<strong>离开页面节点树后</strong>， detached 生命周期函数会被触发</p>\n<ul>\n<li>退出一个页面时，会触发页面内每个自定义组件的 detached 生命周期函数</li>\n<li>此时适合做一些<strong>清理</strong>性质的工作</li>\n</ul>\n</li>\n<li><p>在小程序组件中，生命周期函数可以直接定义在 Component 构造器的第一级参数中，可以在 lifetimes 字段内进行声明**(这是推荐的方式，其优先级最高**)。</p>\n</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">Component</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">lifetimes</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">//推荐用法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">attached</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">//attached()&#123; &#125;, 旧式定义方式</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><p><strong>组件所在页面的生命周期</strong></p>\n<ul>\n<li>自定义组件的行为依赖于页面状态的变化，此时就需要用到组件所在页面的生命周期。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>生命周期函数</strong></th>\n<th align=\"center\"><strong>参数</strong></th>\n<th align=\"center\"><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">show</td>\n<td align=\"center\">无</td>\n<td align=\"center\"><strong>组件所在的页面</strong>被展示时执行</td>\n</tr>\n<tr>\n<td align=\"center\">hide</td>\n<td align=\"center\">无</td>\n<td align=\"center\"><strong>组件所在的页面</strong>被隐藏时执行</td>\n</tr>\n<tr>\n<td align=\"center\">resize</td>\n<td align=\"center\">Object Size</td>\n<td align=\"center\"><strong>组件所在的页面</strong>尺寸变化时执行</td>\n</tr>\n</tbody></table>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">Component</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">pageLifetimes</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//页面被展示</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">hide</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//页面被隐藏</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">resize</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8; font-style: italic\">size</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//页面尺寸变化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><p><strong>插槽</strong></p>\n<ul>\n<li>提供一个&lt; slot&gt;节点(插槽)，用于承载组件使用这提供的 wxml 结构，默认只允许使用单个插槽</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/30a1eac0a25746d6830b1300e8902f74.png\"></p>\n<ul>\n<li>多个插槽，以不同的 name 来区分不同的插槽</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//component.js</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">options</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">multipleSlots</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #FF9CAC\">true</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//component.wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">slot</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">name</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">before</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #F07178\">slot</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">这里是组件的内部结构</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">slot</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">name</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">after</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #F07178\">slot</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//pages.wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">my-test</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">slot</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">before</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">这里通过before插槽填充的内容</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">slot</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">after</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">这里通过after插槽填充的内容</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #FFCB6B\">my-test</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p><strong>父子组件之间的通信</strong></p>\n<ol>\n<li><p>属性绑定</p>\n<ul>\n<li>用于<strong>父组件向子组件的指定属性设置数据</strong>，仅能设置 JSON 兼容的数据</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//父组件data节点</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">data</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">count</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 父组件wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">my-test5</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">count</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #FFCB6B\">my-test5</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">~~~~~~~~~</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> 父组件中，count值是：&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//子组件properties节点</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">properties</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #FFCB6B\">count</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">Number</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 子组件wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">子组件中，count值是：&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div></li>\n<li><p>事件绑定</p>\n<ul>\n<li>用于<strong>子组件向父组件传递数据</strong>，可以传递任意数据</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//父组件定义方法</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">syncCount</span><span style=\"color: #BABED8\">(e)</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">setData</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      count</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">detail</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">value</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//父组件wxml，使用 bind:自定义事件名称</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">my-test5</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">count</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bind</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">sync</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">syncCount</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #FFCB6B\">my-test5</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//子组件wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">子组件中，count值是：&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bindtap</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">addCount</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">+1</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//子组件方法</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">methods</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #82AAFF\">addCount</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">setData</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        count</span><span style=\"color: #89DDFF\">:this.</span><span style=\"color: #BABED8\">properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">count</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">triggerEvent</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sync</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,&#123;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">:this.</span><span style=\"color: #BABED8\">properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">count</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div></li>\n<li><p>获取组件实例</p>\n<ul>\n<li>父组件还可以通过 this.selectComponent()获取子组件实例对象</li>\n<li>这样就可以直接访问<strong>子组件的任意数据和方法</strong></li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//父组件wxml结构</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">my-test5</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">count</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bind</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">sync</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">syncCount</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">customA</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #FFCB6B\">my-test5</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> 父组件中，count值是：&#123;&#123;count&#125;&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bindtap</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">getChild</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">获取子组件的实例对象</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//父组件js方法 id选择器或者class选择器</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">getChild</span><span style=\"color: #BABED8\">()</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">child</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">selectComponent</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">.customA</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #BABED8\">child</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setData</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\">count</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">child</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">count</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #BABED8\">child</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">addCount</span><span style=\"color: #F07178\">()</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span></code></pre></div></li>\n</ol>\n<p><strong>behaviors</strong></p>\n<ul>\n<li>用于<strong>实现组件代码共享</strong>的特性</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/07e12663ba594f4fa51ddebb6335a8a4.png\"></p>\n<ul>\n<li>调用 Behavior(Object object)方法即可创建一个共享的 behavior 实例对象，供所有的组件使用</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//创建文件夹，创建文件</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">module.exports</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Behavior</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">data</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F07178\">username</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">zs</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">properties</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">methods</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//js文件中使用</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> myBehavior </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">require</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">../../behaviors/my-behaviors</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// components/test5/test5.js</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">Component</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">behaviors</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> [myBehavior]</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>可用的节点</strong></th>\n<th align=\"center\"><strong>类型</strong></th>\n<th align=\"center\"><strong>是否必填</strong></th>\n<th align=\"center\"><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><strong>properties</strong></td>\n<td align=\"center\">Object Map</td>\n<td align=\"center\">否</td>\n<td align=\"center\">同组件的属性</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>data</strong></td>\n<td align=\"center\">Object</td>\n<td align=\"center\">否</td>\n<td align=\"center\">同组件的数据</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>methods</strong></td>\n<td align=\"center\">Object</td>\n<td align=\"center\">否</td>\n<td align=\"center\">同自定义组件的方法</td>\n</tr>\n<tr>\n<td align=\"center\"><strong>behaviors</strong></td>\n<td align=\"center\">String Array</td>\n<td align=\"center\">否</td>\n<td align=\"center\">引入其它的 behavior</td>\n</tr>\n<tr>\n<td align=\"center\">created</td>\n<td align=\"center\">Function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">生命周期函数</td>\n</tr>\n<tr>\n<td align=\"center\">attached</td>\n<td align=\"center\">Function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">生命周期函数</td>\n</tr>\n<tr>\n<td align=\"center\">ready</td>\n<td align=\"center\">Function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">生命周期函数</td>\n</tr>\n<tr>\n<td align=\"center\">moved</td>\n<td align=\"center\">Function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">生命周期函数</td>\n</tr>\n<tr>\n<td align=\"center\">detached</td>\n<td align=\"center\">Function</td>\n<td align=\"center\">否</td>\n<td align=\"center\">生命周期函数</td>\n</tr>\n</tbody></table>\n<ul>\n<li>覆盖和组合规则：<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html\">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html</a></li>\n</ul>\n<h2 id=\"1-2-使用-npm-包\"><a href=\"#1-2-使用-npm-包\" class=\"headerlink\" title=\"1.2 使用 npm 包\"></a>1.2 使用 npm 包</h2><p><strong>npm 包的限制</strong></p>\n<ul>\n<li>不支持依赖于 Node.js 内置库的包</li>\n<li>不支持依赖于浏览器内置对象的包</li>\n<li>不支持依赖于 C+＋插件的包</li>\n</ul>\n<p><strong>Vant Weapp</strong></p>\n<ul>\n<li>官方文档地址：<a href=\"https://youzan.github.io/vant-weapp\">https://youzan.github.io/vant-weapp</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/1a5aefab9261406dbe027dbe955da2d7.png\"></p>\n<ul>\n<li><p>安装 Vant 组件库(详细参考<a href=\"https://youzan.github.io/vant-weapp/\">https://youzan.github.io/vant-weapp/#/quickstart#an-zhuang</a>)</p>\n<ol>\n<li>通过 npm 安装(建议指定版本为@1.3.3)</li>\n<li>构建 npm 包</li>\n<li>修改 app.json</li>\n</ol>\n</li>\n<li><p>使用 Vant 组件：</p>\n</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//app.json</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">usingComponents</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">: </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">van-button</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">@vant/weapp/button/index</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//pages的wxml结构</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">van-button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">type</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">primary</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">按钮</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #FFCB6B\">van-button</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><ul>\n<li><p>定制全局主题样式</p>\n<ul>\n<li>CSS 变量的基本用法：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties\">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties</a></li>\n<li>颜色变量：<a href=\"https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less\">https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less</a></li>\n</ul>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">page </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  //定制警告按钮的背景颜色和边框颜色</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  --button-danger-background-color</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">#</span><span style=\"color: #BABED8\">c00000</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  --button-danger-border-color</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">#</span><span style=\"color: #BABED8\">d60000</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div></li>\n</ul>\n<p><strong>API Promise 化</strong></p>\n<ul>\n<li>默认情况下，小程序官方提供的异步 API 都是基于回调函数实现的，<strong>存在回调地狱</strong>，代码的可读性、维护性差</li>\n<li>APl Promise 化，指的是通过<strong>额外的配置</strong>，将官方提供的、基于回调函数的异步 API，升级改造为基于 Promise 的异步 API，从而提高代码的可读性、维护性，避免回调地狱的问题</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//装包，需重新构建</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm i </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">save miniprogram</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">api</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">promise@</span><span style=\"color: #F78C6C\">1.0</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">4</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//app.js</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">promisifyAll</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">miniprogram-api-promise</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> wxp </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> wx</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">p </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">promisifyAll</span><span style=\"color: #BABED8\">(wx</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">wxp)</span></span></code></pre></div><h2 id=\"1-3-全局数据共享\"><a href=\"#1-3-全局数据共享\" class=\"headerlink\" title=\"1.3 全局数据共享\"></a>1.3 全局数据共享</h2><ul>\n<li><p>全局数据共享(又叫做:状态管理)是为了解决<strong>组件之间数据共享</strong>的问题</p>\n</li>\n<li><p>在小程序中，可使用 mobx-miniprogram 配合 mobx-miniprogram-bindings 实现全局数据共享。</p>\n<ul>\n<li>mobx-miniprogram 用来<strong>创建 Store 实例对象</strong></li>\n<li>mobx-miniprogram-bindings 用来<strong>把 Store 中的共享数据或方法，绑定到组件或页面中使用</strong></li>\n</ul>\n</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//装包，重新构建</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm i </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">save mobx</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">miniprogram@</span><span style=\"color: #F78C6C\">4.13</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #BABED8\"> mobx</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">miniprogram</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">bindings@</span><span style=\"color: #F78C6C\">1.2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">1</span></span></code></pre></div><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//创建MobX的Store实例 创建store文件夹、store.js文件</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">observable</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">action</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">mobx-miniprogram</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">export</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> store </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">observable</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">//数据字段</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">numA</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">numB</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">//计算属性</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">get</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F07178\">sum</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">numA</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">numB</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">//actions方法，用来修改store中的数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">updateNum1</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\">action</span><span style=\"color: #BABED8\">(</span><span style=\"color: #C792EA\">function</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8; font-style: italic\">step</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">numA</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">step</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">updateNum2</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\">action</span><span style=\"color: #BABED8\">(</span><span style=\"color: #C792EA\">function</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8; font-style: italic\">step</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">numB</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">step</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//将Store中的成员绑定到页面中 页面的.js文件</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">createStoreBindings</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">mobx-miniprogram-bindings</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">store</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">../../store/store</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">Page</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #82AAFF\">onLoad</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">function</span><span style=\"color: #89DDFF\">()&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">//监听页面加载</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">storeBindings</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #82AAFF\">createStoreBindings</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">this,&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #BABED8\">store</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #F07178\">    </span><span style=\"color: #676E95; font-style: italic\">//指定要绑定的Store</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      fields</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\">[</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">numA</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">numB</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sum</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">]</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #676E95; font-style: italic\">//指定要绑定的字段数据</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      actions</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\">[</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">updateNum1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">]</span><span style=\"color: #676E95; font-style: italic\">//指定要绑定的方法</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #82AAFF\">onUnload</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">function</span><span style=\"color: #89DDFF\">()&#123;</span><span style=\"color: #676E95; font-style: italic\">//监听页面卸载</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">storeBindings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">destroyStoreBindings</span><span style=\"color: #F07178\">()</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//页面wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> &#123;&#123;numA&#125;&#125; + &#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125; </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">view</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">van-button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">type</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">primary</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bindtap</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">btnHandler1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">data-step</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#123;&#123;1&#125;&#125;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> numA+1 </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #FFCB6B\">van-button</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">van-button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">type</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">danger</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bindtap</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">btnHandler1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">data-step</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#123;&#123;-1&#125;&#125;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> numA-1 </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #FFCB6B\">van-button</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//组件js</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">storeBindingsBehavior</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">mobx-miniprogram-bindings</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">store</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">../..store/store</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">Component</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">behaviors</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">[storeBindingsBehavior]</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">storeBindings</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    store</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">fields</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F07178\">numA</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">numA</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F07178\">numB</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">numB</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F07178\">sum</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sum</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">actions</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F07178\">updateNum2</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">updateNum2</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//组件wxml</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">my-numbers</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #FFCB6B\">my-numbers</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//组件js</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">methods</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #82AAFF\">btnHandler2</span><span style=\"color: #F07178\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">updateNum2</span><span style=\"color: #F07178\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">target</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">dataset</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">step</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h2 id=\"1-4-分包\"><a href=\"#1-4-分包\" class=\"headerlink\" title=\"1.4 分包\"></a>1.4 分包</h2><p><strong>概念</strong></p>\n<ul>\n<li><p>分包指的是把一个完整的小程序项目，按照需求划分为不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载</p>\n</li>\n<li><p>优点：</p>\n<ul>\n<li>可以优化小程序首次启动的下载时间</li>\n<li>在多团队共同开发时可以更好的解耦协作</li>\n</ul>\n</li>\n<li><p>分包项目由 1 个主包 + 多个分包组成</p>\n<ul>\n<li>主包:一般只包含项目的启动页面或 TabBar 页面、以及所有分包都需要用到的一些公共资源**(启动是默认下载并启动)**</li>\n<li>分包:只包含和当前分包有关的页面和私有资源**(进入时下载)**</li>\n<li>总包不超过<strong>16M</strong>，单包不超过<strong>2M</strong></li>\n</ul>\n</li>\n</ul>\n<p><strong>使用</strong></p>\n<ul>\n<li>小程序会按**<code>subpackages</code>** 的配置进行分包,subpackages 之外的目录将被打包到主包中</li>\n<li>主包也可以有自己的 pages(即最外层的 pages 字段)</li>\n<li>tabBar 页面必须在主包内</li>\n<li>分包之间不能互相嵌套</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/60ef82b1d54f4a8f9cb1e0afbc14cdab.png\"></p>\n<ul>\n<li><strong>主包无法引用分包</strong>内的私有资源</li>\n<li><strong>分包之间不能相互引用</strong>私有资源</li>\n<li><strong>分包可以引用主包</strong>内的公共资源</li>\n</ul>\n<p><strong>独立分包</strong></p>\n<ul>\n<li><p><strong>独立分包本质也是分包，可以独立于主包和其他分包而单独运行</strong><code>&quot;independent&quot;: true</code></p>\n</li>\n<li><p>开发者可以按需，将某些具有一定功能独立性的页面配置到独立分包中</p>\n<ul>\n<li>小程序从普通分包页面启动时，首先需要下载主包</li>\n<li>独立分包不依赖主包即可运行，<strong>提升分包页面的启动速度</strong></li>\n</ul>\n</li>\n<li><p><strong>独立分包和普通分包以及主包之间，是相互隔绝的，不能相互引用彼此的资源！！</strong></p>\n</li>\n</ul>\n<p><strong>分包预下载</strong></p>\n<ul>\n<li>在进入小程序的某个页面时，<strong>由框架自动预下载可能需要的分包</strong>，从而提升进入后续分包页面时的启动速度</li>\n<li>同一个分包中的页面享有共同的预下裁大小限额<strong>2M</strong></li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1d1d1d\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//app.json</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">preloadRule</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">: </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">pages/contact/contact</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #676E95; font-style: italic\">//指定的网络模式下进行预下载</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">network</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">all</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #676E95; font-style: italic\">//进入页面后预下载哪些分包</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">packages</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">pkgA</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span></code></pre></div>","feature":true,"text":"微信小程序是一种可以在微信平台上运行的应用程序。它不需要下载和安装，用户可以直接通过微信扫码或搜索进入使用。微信小程序具有轻量、快速、跨平台等特点，开发者可以使用HTML、CSS、JavaScript等前端技术进行开发。...","permalink":"/post/前端--微信小程序（进阶）","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[{"name":"前端","slug":"前端","count":48,"path":"api/categories/前端.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E2%80%93%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6\"><span class=\"toc-text\">1、小程序–开发进阶</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6\"><span class=\"toc-text\">1.1 自定义组件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-2-%E4%BD%BF%E7%94%A8-npm-%E5%8C%85\"><span class=\"toc-text\">1.2 使用 npm 包</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-3-%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB\"><span class=\"toc-text\">1.3 全局数据共享</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-4-%E5%88%86%E5%8C%85\"><span class=\"toc-text\">1.4 分包</span></a></li></ol></li></ol>","author":{"name":"会思想的苇草i","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"日拱一卒，功不唐捐 <br/> With each day's arduous effort,<br/>no achievement shall be in vain","socials":{"github":"https://github.com/Thinkingreedi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/ASHIYI66","juejin":"https://juejin.cn/user/4284166567110935","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"微信小程序运行原理揭秘：高效的更新机制","uid":"e6457ff6789a076addbc03fc1dc3721a","slug":"前端--微信小程序运行及更新机制","date":"2023-04-23T14:34:07.000Z","updated":"2025-07-14T15:12:20.465Z","comments":true,"path":"api/articles/前端--微信小程序运行及更新机制.json","keywords":"web前端开发,web前端博客,个人博客,html,css,javascript,vue,react","cover":"https://img-blog.csdnimg.cn/direct/99ef3a76e98343f09343b862791073a9.png","text":"微信小程序是一种可以在微信平台上运行的应用程序。它不需要下载和安装，用户可以直接通过微信扫码或搜索进入使用。微信小程序具有轻量、快速、跨平台等特点，开发者可以使用HTML、CSS、JavaScript等前端技术进行开发。...","permalink":"/post/前端--微信小程序运行及更新机制","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"前端","slug":"前端","count":48,"path":"api/categories/前端.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"author":{"name":"会思想的苇草i","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"日拱一卒，功不唐捐 <br/> With each day's arduous effort,<br/>no achievement shall be in vain","socials":{"github":"https://github.com/Thinkingreedi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/ASHIYI66","juejin":"https://juejin.cn/user/4284166567110935","customs":{}}},"feature":true},"next_post":{"title":"快速上手微信小程序：视图与逻辑","uid":"3c5b8d1cedaa864e9f8845e75af9e565","slug":"前端--微信小程序（视图与逻辑）","date":"2023-03-11T01:45:00.000Z","updated":"2025-07-14T15:12:20.465Z","comments":true,"path":"api/articles/前端--微信小程序（视图与逻辑）.json","keywords":"web前端开发,web前端博客,个人博客,html,css,javascript,vue,react","cover":"https://img-blog.csdnimg.cn/direct/99ef3a76e98343f09343b862791073a9.png","text":"微信小程序是一种可以在微信平台上运行的应用程序。它不需要下载和安装，用户可以直接通过微信扫码或搜索进入使用。微信小程序具有轻量、快速、跨平台等特点，开发者可以使用HTML、CSS、JavaScript等前端技术进行开发。...","permalink":"/post/前端--微信小程序（视图与逻辑）","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[{"name":"前端","slug":"前端","count":48,"path":"api/categories/前端.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"author":{"name":"会思想的苇草i","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"日拱一卒，功不唐捐 <br/> With each day's arduous effort,<br/>no achievement shall be in vain","socials":{"github":"https://github.com/Thinkingreedi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/ASHIYI66","juejin":"https://juejin.cn/user/4284166567110935","customs":{}}},"feature":true}}